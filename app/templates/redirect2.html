<!DOCTYPE html>
<!-- Extend from header -->
{% extends "header_template.html" %}
<!-- Stylesheets -->
{% block css_script_1 %}
<link href="{{url_for('static', filename='css/jquery.dataTables.min.css')}}" rel="stylesheet">
{% endblock %}
{% block css_script_2 %}
<link href="{{url_for('static', filename='dashboard.css')}}" rel="stylesheet">
{% endblock %}
<!-- Include Bootstrap JS and ensure it's correctly loaded -->
<!-- Javascript Scripts -->
{% block js_script_1 %}
<script src="{{url_for('static', filename='js/jquery.dataTables.min.js')}}"></script>
{% endblock %}
{% block js_script_2 %}
<script src="{{url_for('static', filename='js/chart.js')}}"></script>
{% endblock %}
{% block js_script_3 %}
<script src="{{url_for('static', filename='js/chartjs-plugin-datalabels.js')}}"></script>
{% endblock %}
{% block js_script_4 %}
{% if session_start == true %}
<script src="{{url_for('static', filename='dashboard.js')}}"></script>
{% endif %}
{% endblock %}
<!-- Javascript Scripts -->
{% block js_script_5 %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}


<!-- Body -->
{% block body_app %}
<div class="container-fluid">
    <!-- Top Centered Body Part -->
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Body Part (Centered) -->
            <h1 class="display-5 fw-bold text-body-emphasis mb-4 text-center">
                Post-Test Quiz Completed
            </h1>
            <p class="fs-5 mb-4 text-center">Please click the button below to return to the homepage.</p>
            <div class="text-center mb-5">
                <a href="#" class="btn btn-dark btn-lg" target="_blank" rel="noopener noreferrer">Go to Homepage</a>
            </div>
        </div>
    </div>

    <!-- Post Quiz = Reveal all the quiz report -->
    <!-- Reordered sections: Attempt Summary, Progress Report, Personalized Feedback, Answer History -->
    <div class="row">
        <!-- Attempt Summary -->
        <div class="card my-4">
            <div class="card-header fw-bold h5">
                <i class="bi bi-graph-up-arrow"></i> Attempt Summary
            </div>
            <div class="card-body">
                <table class="table">
                    <tbody>
                        <tr class="fw-bold">
                            <td>Total time taken</td>
                            <td>Module(s)</td>
                            <td>Answered correctly</td>
                            <td>Total quiz answered</td>
                        </tr>
                        <tr>
                            <td><input type="text" class="form-control" id="report_time" readonly disabled></td>
                            <td><input type="text" class="form-control" id="selected_cell" readonly disabled></td>
                            <td><input type="text" class="form-control" id="report_correct" readonly disabled></td>
                            <td><input type="text" class="form-control" id="report_num_quiz" readonly disabled></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Progress Report -->
        <!-- <div class="card my-4">
            <div class="card-header fw-bold h5">
                <i class="bi bi-clipboard-data-fill"></i> Progress Report
            </div>
            <div class="card-body">
                <canvas id="attempt_score_chart"></canvas>
                <div id="attempt_chart_status"></div>
            </div>
        </div> -->

        <!-- Personalized Feedback (with toggle) -->
        <!-- <div class="card shadow-sm my-4">
            <div class="card-header d-flex align-items-center justify-content-between"
                data-bs-toggle="collapse"
                data-bs-target="#feedbackContent"
                aria-expanded="true"
                aria-controls="feedbackContent" style="background-color: #6495ED; color: white; cursor: pointer;">
                <h6 class="mb-0" style="font-size: 24px;">
                    <i class="bi bi-chat-left-text-fill me-2"></i>Personalised Feedback (Post-Quiz)
                </h6> -->
                <!-- <i class="bi bi-dash-lg"></i> Default icon set to minus -->
            <!-- </div>
            <div id="feedbackContent" class="collapse show">
                <div class="card-body">
                    <div class="p-3 bg-light border rounded flex-grow-1" id="text_box_tbd"
                        style="white-space: pre-wrap; font-size: 1.1rem; line-height: 1.6; overflow-y: auto;"> -->
                        <!-- Your personalized feedback content goes here -->
                    <!-- </div>
                    <p class="mt-3 text-muted small text-end"> -->
                        <!-- * This feedback was individually generated by an LLM-based Generative AI system. -->
                    <!-- </p> -->
                <!-- </div> -->
            <!-- </div> -->
        <!-- </div> -->

        <!-- Answer History -->
        <div class="card my-4">
            <div class="card-header fw-bold h5 border-top border-secondary-subtle">
                <i class="bi bi-clock-history"></i>&nbsp; Answer History
                <small>(Click on answer history to see explanation)</small>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <div class="container-fluid text-center" id="report_attempt_answer"></div>
                    </div>
                </div>

                <!-- Breakdown of explanation -->
                <div class="row" id="history_exp_card">
                    <table class="table table-borderless">
                        <tr>
                            <th class="text-start">
                                <h5>Question:</h5>
                            </th>
                        </tr>
                        <tr>
                            <td class="text-start text-break">
                                <p id="history_question_text"></p>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-start">
                                <h5>Your answer:</h5>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-start text-break">
                                <p id="history_answer_text"></p>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-start">
                                <h5>Explanation:</h5>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-start text-break">
                                <p id="history_explanation_text"></p>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Toast Container -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="confirmationToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Confirmation</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            Are you sure you want to proceed to the module?
            <div class="mt-2 pt-2 border-top">
                <button type="button" class="btn btn-primary btn-sm" id="confirmYesBtn">Yes</button>
                <button type="button" class="btn btn-secondary btn-sm" id="confirmNoBtn">No</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}



