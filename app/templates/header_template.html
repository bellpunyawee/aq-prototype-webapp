<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="NUS CPFM 2024 - Adaptive Quiz" />
    <title>Adaptive Quiz</title>
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      href="{{ url_for('static', filename='favicon.ico') }}"
      type="image/x-icon"
    />
    <!-- Stylesheets -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    {% block css_script_1 %}{% endblock %} {% block css_script_2 %}{% endblock
    %} {% block css_script_3 %}{% endblock %} {% block css_script_4 %}{%
    endblock %} {% block css_script_5 %}{% endblock %}
    <!-- Scripts -->
    <!-- Your HTML content -->

    <script type="text/javascript">
      // Embedding Python variables into JavaScript
      const sessionStart = "{{ session_start }}";
      const sessionCookies = "{{ session }}"
      const timerSelect = "{{ timer_select }}";
      const quizNumber = "{{ quiz_number }}";
      const maxLimit = "{{ max_limit }}";
      const isDeepLinkLaunch = "{{ is_deep_link_launch }}";
      const launchData = "{{ launch_data }}";
      const launchId = "{{ launch_id }}";
      const currUserName = "{{ curr_user_name }}";
      const LtiUserName = "{{ username }}";
    </script>
     
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="{{url_for('static', filename='js/jquery-3.6.3.min.js')}}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script src="{{url_for('static', filename='header_template.js')}}"></script>
    {% block js_script_1 %}{% endblock %} {% block js_script_2 %}{% endblock %}
    {% block js_script_3 %}{% endblock %} {% block js_script_4 %}{% endblock %}
    {% block js_script_5 %}{% endblock %} {% include "svg_icon.html" %}
  </head>
  {% if session_start == true %}
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-secondary" id="header_row">
      <div class="container">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbars"
          aria-controls="navbars"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse d-lg-flex" id="navbars">
          <a class="navbar-brand col-lg-3 me-0 fw-bold text-dark" href="https://canvas.nus.edu.sg/courses/73869/external_tools/1594" target="_blank" rel="noopener noreferrer"
            ><i class="bi bi-journal-bookmark-fill" ></i> Adaptive Quiz</a
          >
          <!-- May add redirect links later -->
          <!-- <ul class="navbar-nav col-lg-6 justify-content-lg-center fw-bold">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/"
                ><i class="bi bi-house-door-fill"></i> Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/"
                ><i class="bi bi-bookmark-star-fill"></i> Assignment</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#"
                ><i class="bi bi-clipboard-fill"></i> Tasks</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#"
                ><i class="bi bi-chat-left-dots-fill"></i> Messages</a
              >
            </li>
          </ul> -->
          <!-- <div class="d-lg-flex col-lg-3 justify-content-lg-end">
            <a href="/logout/{{ launch_id }}/"
              ><button class="btn btn-dark">
                <i class="bi bi-box-arrow-right"></i> Logout
              </button></a
            >
          </div> -->
        </div>
      </div>
    </nav>
    <!-- Modal -->
    <div
      class="modal"
      tabindex="-1"
      id="loading"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Loading...</h5>
            <!-- <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button> -->
          </div>
          <div class="modal-body text-center">
            <p><strong>Please do not close this window until the operation is complete.</strong></p>
            <div class="spinner-grow" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          <div class="modal-footer">
            <!-- <button type="button" class="btn btn-dark" data-bs-dismiss="modal">
              Close
            </button> -->
          </div>
        </div>
      </div>
    </div>
    <!-- Main Content -->
    <div class="content container">
      <div id="body_app">{% block body_app %}{% endblock %}</div>
    </div>
    {% else %}
    
    <!-- Login Page -->
    <div class="container d-flex align-items-center p-5">
      <main class="form-signin w-75 m-auto">
        <img
          src="{{url_for('static', filename='images/cpfm.png')}}"
          alt=""
          class="mx-3 img-fluid"
        />
        <h2 class="display-6 py-3 fw-bold text-center" id="AQ_title">
          Adaptive Quiz<br />
          <small class="text-body-secondary">for Project Management</small>
        </h2>
        <!-- Sign In Form -->
        <form id="normal_form">
          <h4 class="h4 my-4 fw-bold">
            <i class="bi bi-door-open-fill"></i> Login
          </h4>
          <div class="mb-3">
            <label for="username" class="form-label fw-bold"
              ><i class="bi bi-person"></i> Canvas username authorization ... </label
            >
            <input
              type="hidden"
              id="login_user_id"
              class="form-control"
              placeholder="Enter your username"
              value ="{{ username }}" 
            />
          </div>
          <div class="mb-3">
            <label for="password" class="form-label fw-bold"
              ><i class="bi bi-key"></i> Password authorization ...</label
            >
            <div class="input-group">
              <input
                type="hidden"
                id="login_user_pw"
                class="form-control"
                placeholder="Enter your password"
                value ="12345"
              />
              <!-- <button
                type="hidden"
                class="btn btn-outline-secondary"
                id="togglePassword"
              >
                <i class="bi bi-eye"></i>
              </button> -->
            </div>
          </div>

          <div class="col" id="login_alert_point"></div>
          <!-- <div class="d-flex justify-content-between">
            <div class="form-check mb-3">
              <input
                class="form-check-input"
                type="hidden"
                value="remember-me"
                id="rememberme"
              />
              <label class="form-check-label" for="rememberme"
                >Remember me</label
              >
            </div>
            <div class="mb-3">
              <a href="#" id="reset_pw_btn" class="nav-link fw-bold"
                >Forgot password</a
              >
            </div>
          </div> -->
          <div class="d-flex justify-content-end">
            <button class="btn btn-dark mt-3" type="hidden" id="login_btn">
              Log in
            </button>
          </div>
          <p class="m-5 text-center">
            &copy; 2024 Centre of Project and Facilities Management
          </p>
        </form>
        <!-- Forgot Password Form -->
        <form id="forgot_form" class="d-none">
          <div class="mb-3">
            <label for="username" class="form-label fw-bold"
              ><i class="bi bi-person"></i> Username</label
            >
            <input
              type="text"
              id="reset_user_id"
              class="form-control"
              reset_type="credential"
              placeholder="Enter your username"
            />
          </div>
          <div class="mb-3">
            <label for="name" class="form-label fw-bold"
              ><i class="bi bi-person-bounding-box"></i> Name</label
            >
            <input
              type="text"
              id="reset_user_name"
              class="form-control"
              reset_type="credential"
              placeholder="Enter your name"
            />
          </div>
          <div class="mb-3">
            <label for="password" class="form-label fw-bold"
              ><i class="bi bi-key"></i> New Password</label
            >
            <input
              type="password"
              id="reset_user_pw_1"
              class="form-control"
              reset_type="credential"
              placeholder="Enter your new password"
            />
          </div>
          <div class="mb-3">
            <label for="confirm_password" class="form-label fw-bold"
              ><i class="bi bi-key"></i> Confirm New Password</label
            >
            <input
              type="password"
              id="reset_user_pw_2"
              class="form-control"
              reset_type="credential"
              placeholder="Enter your new password again"
            />
          </div>
          <div class="row" id="reset_alert_point"></div>
          <div class="d-flex justify-content-between">
            <button class="btn btn-dark mt-3" type="submit" id="back_login_btn">
              <i class="bi bi-arrow-left"></i>&nbsp;Back
            </button>
            <button class="btn btn-dark mt-3" type="submit" id="submit_pw_btn">
              Submit&nbsp;<i class="bi bi-arrow-right"></i>
            </button>
          </div>
        </form>
      </main>
    </div>
  </body>
  {% endif %}
</html>
